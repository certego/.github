name: Reusable release and tag workflow
on:
  workflow_call

jobs:
  release_and_tag:
    name: Create release and tag
    runs-on: ubuntu-latest
    if: github.event.pull_request.merged == true && ( github.base_ref == "master" || github.base_ref == "main" ) && github.event.pull_request.title =~ ^[0-9]+\.[0-9]+\.[0-9]+$
    steps:
      - uses: actions/checkout@v3
      - name: Create Tag and Release
        id: create_release
        uses: softprops/action-gh-release@v1
        with:
          tag_name: ${{ github.event.pull_request.title }}
          name: Version ${{ github.event.pull_request.title }}
          draft: false
          generate_release_notes: true
          prerelease: false